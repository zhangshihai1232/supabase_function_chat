---
description: å¼€å‘å‘½ä»¤å’Œè„šæœ¬æŒ‡å—
alwaysApply: true
---

# å¼€å‘å‘½ä»¤æŒ‡å—

## ğŸš€ å¯åŠ¨æœåŠ¡

### æœ¬åœ°å¼€å‘ï¼ˆæ¨èï¼‰
```bash
# æ–¹å¼ 1ï¼šç›´æ¥è¿è¡Œè„šæœ¬
./start-deno.sh

# æ–¹å¼ 2ï¼šä½¿ç”¨ npm script
npm run dev

# æ–¹å¼ 3ï¼šä½¿ç”¨ deno script
npm run deno
```

è¿™äº›å‘½ä»¤éƒ½ä¼šï¼š
- è‡ªåŠ¨æ£€æŸ¥å¹¶å®‰è£… Denoï¼ˆå¦‚æœéœ€è¦ï¼‰
- æ£€æŸ¥ç«¯å£å ç”¨å¹¶è‡ªåŠ¨æ¸…ç†
- å¯åŠ¨å¸¦çƒ­é‡è½½çš„å¼€å‘æœåŠ¡å™¨
- åŠ è½½ `.env` ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

### ç”Ÿäº§ç¯å¢ƒï¼ˆä»…åœ¨éƒ¨ç½²æ—¶ä½¿ç”¨ï¼‰
```bash
# âŒ æœ¬åœ°æµ‹è¯•æ—¶ä¸è¦ä½¿ç”¨
./start-functions.sh
npm run start
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### Deno ç›¸å…³å‘½ä»¤
```bash
# æ£€æŸ¥ Deno ç‰ˆæœ¬
deno --version

# æ ¼å¼åŒ–ä»£ç 
deno fmt

# ç±»å‹æ£€æŸ¥
deno check supabase/functions/chat/index.ts

# è¿è¡Œæµ‹è¯•
deno test

# å®‰è£…/æ›´æ–° Deno
curl -fsSL https://deno.land/x/install/install.sh | sh
```

### è°ƒè¯•æ¨¡å¼
```bash
# å¯åŠ¨è°ƒè¯•æ¨¡å¼
deno run --inspect-brk --allow-all supabase/functions/chat/index.ts

# ç„¶ååœ¨ Chrome ä¸­æ‰“å¼€ï¼šchrome://inspect
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡è®¾ç½®
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
# .env ç¤ºä¾‹
PORT=8000
GEMINI_API_KEY=your_api_key_here
```

### PATH é…ç½®
ç¡®ä¿ Deno åœ¨ä½ çš„ PATH ä¸­ï¼š
```bash
# æ·»åŠ åˆ°ä½ çš„ shell é…ç½®æ–‡ä»¶ (.bashrc, .zshrc ç­‰)
export PATH="$HOME/.deno/bin:$PATH"
```

## ğŸ› æ•…éšœæ’é™¤

### ç«¯å£è¢«å ç”¨
[start-deno.sh](mdc:start-deno.sh) ä¼šè‡ªåŠ¨å¤„ç†ï¼Œä½†å¦‚æœéœ€è¦æ‰‹åŠ¨æ£€æŸ¥ï¼š
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8000

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 $(lsof -ti:8000)
```

### Deno æƒé™é—®é¢˜
ç¡®ä¿è¿è¡Œæ—¶æœ‰è¶³å¤Ÿæƒé™ï¼š
```bash
deno run --allow-net --allow-env --allow-read your-script.ts
```

### æ¨¡å—å¯¼å…¥é—®é¢˜
æ¸…ç† Deno ç¼“å­˜ï¼š
```bash
deno cache --reload supabase/functions/chat/index.ts
```

## ğŸ“ æ—¥å¸¸å¼€å‘æµç¨‹

1. **å¯åŠ¨æœåŠ¡**: `./start-deno.sh`
2. **ä¿®æ”¹ä»£ç **: ç¼–è¾‘ `.ts` æ–‡ä»¶ï¼Œè‡ªåŠ¨çƒ­é‡è½½
3. **æµ‹è¯• API**: è®¿é—® `http://localhost:8000`
4. **è°ƒè¯•**: æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºæˆ–ä½¿ç”¨è°ƒè¯•å™¨
5. **æäº¤ä»£ç **: ä½¿ç”¨ `deno fmt` æ ¼å¼åŒ–ä»£ç 

## ğŸ” å¸¸ç”¨ç«¯ç‚¹

æœ¬åœ°æœåŠ¡è¿è¡Œåå¯è®¿é—®ï¼š
- **å¥åº·æ£€æŸ¥**: `GET http://localhost:8000/health`
- **èŠå¤© API**: `POST http://localhost:8000/chat`
- **å…¶ä»–ç«¯ç‚¹**: æŸ¥çœ‹ [oak-router.ts](mdc:supabase/functions/chat/oak-router.ts)